{"version":3,"file":"commonHelpers.js","sources":["../src/js/script.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst BASE_URL = \"https://pixabay.com/api\";\nconst API_KEY = \"42039284-aa75c07fa754230e40c75f28c\";\nconst url = `${BASE_URL}?key=${API_KEY}&q=&{query}&image_type=photo&orientation=horiontal&safesearch=true`;\n\nconst btn = document.querySelector(\".btn\");\nconst form = document.querySelector(\".foto-form\");\nconst list = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\n// fetch(url).then(resp => {\n//     if (!resp.ok) {\n//         throw new Error(resp.statusText);\n//     }\n//     return resp.json();\n// }).then(data => console.log(data)).catch(err => console.log(err));\n\n\n// form.addEventListener(\"submit\", handleSearch)\n\n// function handleSearch(event) {\n//     event.preventDefault();\n//     const query = event.currentTarget.elements.query.value.trim();\n//     if (!query) {\n//         createMessage(`The search field can't be empty! Please, enter your request!`);\n//         return;\n//     }\n// }\n\n// getPhotos(url).then(data => {\n//     if (data.pictures.length === 0) {\n//         createMessage(`Sorry, there are no images matching your search query. Please, try again!`);\n//        //loadAnimation(false);\n//     };\n//     list.innerHTML = createList(data.pictures);\n//     //loadAnimation(false);\n//     let galleryBox = new SimpleLightbox('.gallery a', {\n//         captionsData: 'alt',\n//         captionDelay: 250,\n//     }).catch(err => console.log(err));\n// });\n\n// function getPhotos(url) {\n//     //loadAnimation(true);\n//     return fetch(url).then(resp => {\n//         if (!resp.ok) {\n//             throw new Error(resp.statusText);\n//         }\n//         return resp.json();\n//     })\n// }\n\n// function createList(pictures) {\n//     return pictures\n//         .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"gallery-item\">\n//         <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//         <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n//         <p class=\"gallery-text\"> Likes: <span>${likes}</span> Views: <span>${views}</span> Comments: <span>${comments}</span> Downloads: <span>${downloads}</span></p>\n//         </a>\n//     </li>`)\n//         .join(\"\");\n// }\n\n// function createMessage(message) {\n//     iziToast.show({\n//         message: message,\n//         close: false,\n//         closeOnClick: true,\n//     });\n// }\n\n// function loadAnimation(sta) {\n//   loader.style.display = !state ? 'none' : 'inline-block';\n//   btn.disabled = state;\n// }\n\n\n\n\n//************************************************************************************* */\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = form.query.value.trim();\n\n  if (!query) {\n    createMessage(\n      `The search field can't be empty! Please, enter your request!`\n    );\n    return;\n  }\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  fetchImages(url)\n    .then(data => {\n      if (data.hits.length === 0) {\n        createMessage(\n          `Sorry, there are no images matching your search query. Please, try again!`\n        );\n        showLoader(false);\n      }\n\n      list.innerHTML = createMarkup(data.hits);\n      showLoader(false);\n      const simplyGallery = new SimpleLightbox('.gallery-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      form.reset();\n    })\n    .catch(error => console.error(error));\n});\n\nfunction fetchImages(url) {\n  showLoader(true);\n  return fetch(url).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkup(hits) {\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n        <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n    <p class=\"gallery-descr\">Likes: <span class=\"descr-span\">${likes}</span> Views: <span class=\"descr-span\">${views}</span> Comments: <span class=\"descr-span\">${comments}</span> Downloads: <span class=\"descr-span\">${downloads}</span></p>\n  </a>\n</li>`\n    )\n    .join('');\n}\n\nfunction createMessage(message) {\n  iziToast.show({\n    \n    message: message,\n    \n    close: false,\n    closeOnClick: true,\n  });\n}\n\nfunction showLoader(state = true) {\n  loader.style.display = !state ? 'none' : 'inline-block';\n  btn.disabled = state;\n}"],"names":["BASE_URL","API_KEY","btn","form","list","loader","event","query","createMessage","url","fetchImages","data","showLoader","createMarkup","SimpleLightbox","error","resp","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","message","iziToast","state"],"mappings":"6vBAMA,MAAMA,EAAW,0BACXC,EAAU,qCAGVC,EAAM,SAAS,cAAc,MAAM,EACnCC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EAyE/CF,EAAK,iBAAiB,SAAUG,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAQJ,EAAK,MAAM,MAAM,KAAI,EAEnC,GAAI,CAACI,EAAO,CACVC,EACE,8DACN,EACI,MACD,CACD,MAAMC,EAAM,GAAGT,SAAgBC,OAAaM,4DAE5CG,EAAYD,CAAG,EACZ,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,IACvBH,EACE,2EACV,EACQI,EAAW,EAAK,GAGlBR,EAAK,UAAYS,EAAaF,EAAK,IAAI,EACvCC,EAAW,EAAK,EACM,IAAIE,EAAe,kBAAmB,CAC1D,aAAc,MACd,aAAc,GACtB,CAAO,EACDX,EAAK,MAAK,CAChB,CAAK,EACA,MAAMY,GAAS,QAAQ,MAAMA,CAAK,CAAC,CACxC,CAAC,EAED,SAASL,EAAYD,EAAK,CACxB,OAAAG,EAAW,EAAI,EACR,MAAMH,CAAG,EAAE,KAAKO,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASH,EAAaI,EAAM,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,kCAE0BL;AAAA;AAAA;AAAA,aAGrBD;AAAA,aACAE;AAAA;AAAA,+DAEkDC,4CAAgDC,+CAAmDC,gDAAuDC;AAAA;AAAA,MAGpN,EACA,KAAK,EAAE,CACZ,CAEA,SAAShB,EAAciB,EAAS,CAC9BC,EAAS,KAAK,CAEZ,QAASD,EAET,MAAO,GACP,aAAc,EAClB,CAAG,CACH,CAEA,SAASb,EAAWe,EAAQ,GAAM,CAChCtB,EAAO,MAAM,QAAWsB,EAAiB,eAAT,OAChCzB,EAAI,SAAWyB,CACjB"}